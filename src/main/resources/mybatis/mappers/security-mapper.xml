<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="multi.fclass.iMint.security.dao.ISecurityDAO">

    <insert id="savesns" parameterType="multi.fclass.iMint.member.dto.MemberDTO">
        INSERT INTO imint.member(mb_id, mb_provider, mb_guard ,mb_nick,  mb_email, mb_join_date, mb_ratings_total,mb_isdelete, mb_role) 
        VALUES
        (#{mbId}, #{mbProvider}, #{mbGuard}, #{mbNick}, #{mbEmail} ,now(),25, 0 , #{mbRole});
    </insert>
        
    <update id="updateregister3" parameterType="multi.fclass.iMint.member.dto.MemberDTO">
        UPDATE imint.member 
        SET mb_id = #{mbId}, mb_nick = #{mbNick}, mb_email = #{mbEmail}, mb_interest = #{mbInterest}
        WHERE (mb_id = #{mbId});
    </update>

    <update id="updateregister4" parameterType="multi.fclass.iMint.member.dto.MemberDTO">
        UPDATE imint.member 
        SET mb_role = #{mbRole}, mb_location = #{mbLocation}, mb_guard = #{mbGuard}, mb_pin = #{mbPin}
        WHERE (mb_id = #{mbId});
    </update>
    
   <!--  임시  -->
    <update id="updatedetails" parameterType="multi.fclass.iMint.member.dto.MemberDTO">
        UPDATE imint.member 
        SET mb_nick = #{mbNick}, mb_email = #{mbEmail}, mb_interest = #{mbInterest}
        WHERE (mb_id = #{mbId});
    </update>
    
    <select id="findByMbId" resultType="multi.fclass.iMint.member.dto.MemberDTO">
        SELECT * FROM imint.member WHERE mb_id = #{mbId}
    </select>
    
    <select id="findByMbEmail" resultType="multi.fclass.iMint.member.dto.MemberDTO">
        SELECT * FROM imint.member WHERE mb_email = #{mbEmail}
    </select>

    <select id="findByMbNick" resultType="multi.fclass.iMint.member.dto.MemberDTO">
        SELECT * FROM imint.member WHERE mb_nick = #{mbNick}
    </select>  
    
    <select id="findByMbGuard" resultType="multi.fclass.iMint.member.dto.MemberDTO">
        SELECT mb_nick FROM imint.member WHERE mb_guard = #{mbGuard}
    </select>  
</mapper>