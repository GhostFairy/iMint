<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="multi.fclass.iMint.chat.dao.IChatDAO">
	<select id="getChatMessages" resultType="ChatMessageDTO">
		SELECT
			id,
			chatroom_id,
			sender_id,
			if(deleted = TRUE, "삭제된 메세지입니다.", message) AS message,
			read,
			send_date,
			deleted
		FROM
			`imint`.`chat_messages`
		WHERE
			chatroom_id = #{chatroomId}
	</select>
</mapper>